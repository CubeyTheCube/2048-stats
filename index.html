<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>repl.it</title>
<style>
input {
width: 50px;
height: 50px;
}
.scoreInput {
  width: 100px;
  height: 10px;
}
</style>
  </head>
  <body>
    <h2>Enter your board state</h2>
    <input id = "0"></input>
    <input id = "1"></input>
    <input id = "2"></input>
    <input id = "3"></input>
    </br>
    </br>
    <input id = "4"></input>
    <input id = "5"></input>
    <input id = "6"></input>
    <input id = "7"></input>
</br>
</br>
    <input id = "8"></input>
    <input id = "9"></input>
    <input id = "10"></input>
    <input id = "11"></input>
</br>
</br>
    <input id = "12"></input>
    <input id = "13"></input>
    <input id = "14"></input>
    <input id = "15"></input>
</br>
</br>
</div>
<h2>Enter your score</h2>
<input id = "score" class = "scoreInput"> </input>
<p id = "output"></p>


    <script>
const d = document.getElementById.bind(document);
function n(input) {
  return d(input.toString()).value;
}
function calc() {
var board = []
for(var i = 0; i < 16; i++) {
  board.push(n(i))
}
function maxScore(t) {
  return t?t*(Math.log2(t)-2)+t:0;
}
var max = 0;
var total = 0;
for(i = 0; i < 16; i++) {
  max += maxScore(board[i]?parseInt(board[i]):0)
  total += board[i]?parseInt(board[i]):0;
}
var diff = max-d("score").value;
var fourSpawns = diff/4;
var twoSpawns = (total-diff)/2;
var spawns = twoSpawns+fourSpawns;
var moves = spawns - 2;
var fourPercentage = fourSpawns/(twoSpawns+fourSpawns);
//var fourPercentile = 1-Math.exp(-6.9315*Math.pow(fourPercentage, moves));
var fourPercentile = "WIP"
d("output").innerHTML = `4 spawns: ${fourSpawns}</br>2 spawns: ${twoSpawns}</br>Total spawns: ${spawns}</br>Moves: ${moves}</br>4 percentage: ${fourPercentage*100}%</br>4 spawn rate percentile: ${fourPercentile*100}%`;
}
setInterval(calc, 16)
    </script>
  </body>
</html>
